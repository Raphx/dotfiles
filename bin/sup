#!/usr/bin/env bash

# System upgrade script

echo ""
echo "======================================"
echo "   System upgrade"
echo "======================================"
echo ""

sudo pacman -Syyu
sudo pacman -Sc --noconfirm

echo ""
echo "======================================"
echo "   AUR repositories"
echo "======================================"
echo ""

for dir in "$HOME/.aur/"*;
do
  echo "Cleaning and checking $(basename "$dir")..."
  git -C "$dir" clean -qf
  git -C "$dir" pull
done

echo ""
echo "======================================"
echo "   tealdeer local cache"
echo "======================================"
echo ""

tldr -u

echo ""
echo "======================================"
echo "   asdf and its plugins"
echo "======================================"
echo ""

"$HOME/.asdf/bin/asdf" update
"$HOME/.asdf/bin/asdf" plugin-update --all

echo ""
echo "======================================"
echo "   vim plugins"
echo "======================================"
echo ""

git -C "$HOME/.vim" submodule foreach git pull origin master
