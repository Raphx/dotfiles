#!/usr/bin/env bash

# System upgrade script

echo ""
echo "======================================"
echo "   System upgrade"
echo "======================================"
echo ""

sudo -s -- <<EOF
pacman -Syyu --noconfirm
pacman -Sc --noconfirm
EOF

echo ""
echo "======================================"
echo "   AUR repositories"
echo "======================================"
echo ""

for dir in "$HOME/.aur/"*;
do
  echo "Cleaning and checking $(basename "$dir")..."
  git -C "$dir" checkout .
  git -C "$dir" clean -qf
  git -C "$dir" pull
done

echo ""
echo "======================================"
echo "   tldr local cache"
echo "======================================"
echo ""

tldr -u

echo ""
echo "======================================"
echo "   vim plugins"
echo "======================================"
echo ""

git -C "$HOME/.vim/pack/plugins" submodule foreach git pull origin master
