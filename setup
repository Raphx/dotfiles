#!/usr/bin/env bash

## Full path of script
cwd="$(dirname "$(realpath "$0")")"

## Commands
log='echo'
create='mkdir -p'
link='ln -sfn'

## Start setup
$log 'Setting up dotfiles ...'

$log '  user bin directory'
$create "$HOME/.local"
$link "$cwd/bin" "$HOME/.local/bin"

$log '  bash'
$link "$cwd/bash/bashrc" "$HOME/.bashrc"
$link "$cwd/bash/bash_profile" "$HOME/.bash_profile"

$log '  bash completions'
$create "$HOME/.local/share/bash-completion"
$link "$cwd/bash/completions" "$HOME/.local/share/bash-completion/completions"

$log '  fontconfig'
$create "$HOME/.config/fontconfig"
$link "$cwd/fontconfig/fonts.conf" "$HOME/.config/fontconfig/fonts.conf"

$log '  git'
$link "$cwd/git/gitconfig" "$HOME/.gitconfig"
$link "$cwd/git/gitignore" "$HOME/.gitignore"

$log '  gnupg'
$create "$HOME/.gnupg"
$link "$cwd/gnupg/gpg-agent.conf" "$HOME/.gnupg/gpg-agent.conf"

$log '  mutt'
$create "$HOME/.mutt"
$create "$HOME/.cache/mutt"
$link "$cwd/mutt/muttrc" "$HOME/.mutt/muttrc"

$log '  readline'
$link "$cwd/readline/inputrc" "$HOME/.inputrc"

$log '  ruby'
$link "$cwd/ruby/gemrc" "$HOME/.gemrc"
$link "$cwd/ruby/irbrc" "$HOME/.irbrc"

$log '  ruby bundler'
$create "$HOME/.bundle"
$link "$cwd/ruby/bundler-config" "$HOME/.bundle/config"

$log '  systemd'
$create "$HOME/.config/systemd/user"
$link "$cwd/systemd/user/ssh-agent.service" "$HOME/.config/systemd/user/ssh-agent.service"

$log '  tmux'
$link "$cwd/tmux/tmux.conf" "$HOME/.tmux.conf"

$log '  vim'
$link "$cwd/vim/vimrc" "$HOME/.vimrc"

$log '  x'
$link "$cwd/x/Xresources" "$HOME/.Xresources"
$link "$cwd/x/xinitrc" "$HOME/.xinitrc"

$log '  i3'
$create "$HOME/.config/i3"
$link "$cwd/i3wm/i3-config" "$HOME/.config/i3/config"

$log '  i3status'
$create "$HOME/.config/i3status"
$link "$cwd/i3wm/i3status-config" "$HOME/.config/i3status/config"

$log '  gtk3'
$create "$HOME/.config/gtk-3.0"
$link "$cwd/gtk3/settings.ini" "$HOME/.config/gtk-3.0/settings.ini"

$log 'Done.'
